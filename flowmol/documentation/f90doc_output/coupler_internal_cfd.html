<HTML>
<HEAD>
   <TITLE> module coupler_internal_cfd (generated by f90doc) </TITLE>
</HEAD>
<H1> Module coupler_internal_cfd </H1>
<PRE>module coupler_internal_cfd

        ! Types
    public type <A HREF="coupler_internal_cfd.html#type_bbox">bbox</A>

        ! Variables
    type (bbox), public, target :: <A HREF="coupler_internal_cfd.html#var_bbox_cfd">bbox_cfd</A>
    type (bbox), public, target :: <A HREF="coupler_internal_cfd.html#var_bbox_md">bbox_md</A>

        ! Subroutines and functions
    public subroutine <A HREF="coupler_internal_cfd.html#subroutine_coupler_cfd_init">coupler_cfd_init</A> (nsteps, dt_cfd, icomm_grid, icoord, npxyz_cfd, xyzL, ncxyz, density, ijkcmax, ijkcmin, iTmin, iTmax, jTmin, jTmax, kTmin, kTmax, xg, yg, zg)
    public subroutine <A HREF="coupler_internal_cfd.html#subroutine_create_map_cfd">create_map_cfd</A> ()

end module coupler_internal_cfd
</PRE>
				   Coupler internal CFD   				   
 Internal data and subroutines used by the coupler when working in CFD realm
 It must not be used by subroutimes working in MD realm

<HR><H2> Description of Types </H2>
<A NAME="type_bbox"><H3>bbox</H3></A>
<PRE>public type bbox
    integer, allocatable, dimension (:,:) :: xbb
    integer, allocatable, dimension (:,:) :: ybb
    integer, allocatable, dimension (:,:) :: zbb
end type bbox
</PRE>

<HR><H2> Description of Variables </H2>
<A NAME="var_bbox_cfd"><H3>bbox_cfd</H3></A>
<PRE>type (bbox), public, target :: bbox_cfd
</PRE>
<A NAME="var_bbox_md"><H3>bbox_md</H3></A>
<PRE>type (bbox), public, target :: bbox_md
</PRE>

<HR><H2> Description of Subroutines and Functions </H2>
<A NAME="subroutine_coupler_cfd_init"><H3>coupler_cfd_init</H3></A>
<PRE>public subroutine coupler_cfd_init (nsteps, dt_cfd, icomm_grid, icoord, npxyz_cfd, xyzL, ncxyz, density, ijkcmax, ijkcmin, iTmin, iTmax, jTmin, jTmax, kTmin, kTmax, xg, yg, zg)
    integer, intent(in) :: nsteps
    real (kind=kind (0.d0)), intent(in) :: dt_cfd
    integer, intent(in) :: icomm_grid
    integer, dimension(:,:), intent(in) :: icoord
    integer, dimension(3), intent(in) :: npxyz_cfd
    real (kind=kind (0.d0)), dimension(3), intent(in) :: xyzL
    integer, dimension(3), intent(in) :: ncxyz
    real (kind=kind (0.d0)), intent(in) :: density
    integer, dimension(3), intent(in) :: ijkcmax
    integer, dimension(3), intent(in) :: ijkcmin
    integer, dimension(:), intent(in) :: iTmin
    integer, dimension(:), intent(in) :: iTmax
    integer, dimension(:), intent(in) :: jTmin
    integer, dimension(:), intent(in) :: jTmax
    integer, dimension(:), intent(in) :: kTmin
    integer, dimension(:), intent(in) :: kTmax
    real (kind=kind (0.d0)), dimension(:,:), intent(in) :: xg
    real (kind=kind (0.d0)), dimension(:,:), intent(in) :: yg
    real (kind=kind (0.d0)), dimension(:  ), intent(in) :: zg
    ! Calls: CPL_rank_map, MPI_Cart_rank, MPI_bcast, MPI_comm_dup, MPI_comm_rank, check_mesh, write_matrix_int
end subroutine coupler_cfd_init
</PRE>
 Initialisation routine for coupler module - Every variable is sent and stored
 to ensure both md and cfd region have an identical list of parameters
<P>
 <UL>
 <LI>  Synopsis
<P>
  <UL>
  <LI>  coupler_cfd_init(nsteps,dt_cfd,icomm_grid,icoord,npxyz_cfd,xyzL,ncxyz,
  </UL>
 </UL>
							   density,ijkcmax,ijkcmin,iTmin,iTmax,jTmin,
							   jTmax,kTmin,kTmax,xg,yg,zg)
<P>
 <UL>
 <LI>  Input
<P>
  <UL>
  <LI>  nsteps
   <UL>
   <LI>  Number of time steps the CFD code is expected to run for (integer)
   </UL>
  <LI>  dt_cfd
   <UL>
   <LI>  CFD timestep (dp real)
   </UL>
  <LI>  icomm_grid
   <UL>
   <LI>  The MPI communicator setup by the MPI_CART_CREATE command in the 
     CFD region (integer)
   </UL>
  <LI>  icoord
   <UL>
   <LI>  The three coordinate for each rank in the domain (integer array nproc by 3)
   </UL>
  <LI>  npxyz_cfd
   <UL>
   <LI>  Number of processors in each cartesian dimension (integer array 3)
   </UL>
  <LI>  xyzL
   <UL>
   <LI>  Size of domain in each cartesian dimension (dp real array 3)
   </UL>
  <LI>  ncxyz
   <UL>
   <LI>  Global number of cells in each cartesian dimension (integer array 3)
   </UL>
  <LI>  density
   <UL>
   <LI>  Density of the CFD simulation (dp_real)
   </UL>
  <LI>  ijkcmax
   <UL>
   <LI>  Global minimum cell in each cartesian dimension (integer array 3)
   </UL>
  <LI>  ijkcmin
   <UL>
   <LI>  Global maximum cell in each cartesian dimension (integer array 3)
   </UL>
  <LI>  iTmin
   <UL>
   <LI>  Local minimum cell for each rank (integer array no. procs in x)
   </UL>
  <LI>  iTmax
   <UL>
   <LI>  Local maximum cell for each rank (integer array no. procs in x)
   </UL>
  <LI>  jTmin
   <UL>
   <LI>  Local minimum cell for each rank (integer array no. procs in y)
   </UL>
  <LI>  jTmax
   <UL>
   <LI>  Local maximum cell for each rank (integer array no. procs in y)
   </UL>
  <LI>  kTmin
   <UL>
   <LI>  Local minimum cell for each rank (integer array no. procs in z)
   </UL>
  <LI>  kTmax
   <UL>
   <LI>  Local maximum cell for each rank (integer array no. procs in z)
   </UL>
  <LI>  xg
   <UL>
   <LI>  Array of cell vertices in the x direction (no. cells in x by 
     no. cells in y)
   </UL>
  <LI>  yg
   <UL>
   <LI>  Array of cell vertices in the y direction (no. cells in x by 
     no. cells in y)
   </UL>
  <LI>  zg
   <UL>
   <LI>  Array of cell vertices in the z direction (no. cells in z)
<P>
   </UL>
  </UL>
 <LI>  Input/Output
  <UL>
  <LI>  NONE
<P>
  </UL>
 <LI>  Output
  <UL>
  <LI>  NONE
<P>
  </UL>
 </UL>
<P>
<STRONG>Author:</STRONG> Edward Smith
<A NAME="subroutine_create_map_cfd"><H3>create_map_cfd</H3></A>
<PRE>public subroutine create_map_cfd ()
    ! Calls: MPI_barrier, find_overlaps, make_bbox, mpi_allgather, mpi_comm_rank, mpi_comm_split, mpi_isend, mpi_waitall
end subroutine create_map_cfd
</PRE>
</HTML>
