import wx
from PyplotPanel import PyplotPanel
from FieldChooser import FieldChooserPanel
from SliderPanels import RecordSliderPanel

from MD_PostProc import MD_PostProc

class VisualiserPanel(wx.Panel):
 
    def __init__(self,parent,**kwargs):

        wx.Panel.__init__(self,parent,**kwargs)
        self.imgp = PyplotPanel(self)
        self.choosep = FieldChooserPanel(self)
        self.slidersp = RecordSliderPanel(self)

        vbox = wx.BoxSizer(wx.VERTICAL)
        hbox = wx.BoxSizer(wx.HORIZONTAL)
        hbox.Add(self.choosep, 0, wx.EXPAND | wx.ALL)
        hbox.Add(self.imgp, 1, wx.EXPAND | wx.ALL)
        vbox.Add(hbox, 1, wx.EXPAND | wx.ALL)
        vbox.Add(self.slidersp, 0, wx.EXPAND | wx.ALL)
        self.SetSizer(vbox)

        self.set_bindings()

    def set_bindings(self):

        self.Bind(wx.EVT_RADIOBOX, self.handle_plottype, 
                  self.choosep.plottype_p.fieldradiobox)
        self.Bind(wx.EVT_RADIOBOX, self.handle_fieldtype, 
                  self.choosep.fieldtype_p.fieldradiobox)
        self.Bind(wx.EVT_COMBOBOX, self.handle_xyz, 
                  self.choosep.component_p.componentcombobox)
        self.Bind(wx.EVT_COMBOBOX, self.handle_normal, 
                  self.choosep.component_p.normalcombobox)

        self.Bind(wx.EVT_COMMAND_SCROLL, self.handle_recslider, 
                  self.slidersp.recslider.slider)
        self.Bind(wx.EVT_COMMAND_SCROLL, self.handle_binslider, 
                  self.slidersp.binslider.slider)
        self.Bind(wx.EVT_TEXT_ENTER, self.handle_rectxt,
                  self.slidersp.recslider.slidertext)
        self.Bind(wx.EVT_TEXT_ENTER, self.handle_bintxt,
                  self.slidersp.binslider.slidertext)

        self.Bind(wx.EVT_SPINCTRL, self.handle_recspin,
                  self.slidersp.recslider.spin)
        self.Bind(wx.EVT_SPINCTRL, self.handle_binspin,
                  self.slidersp.binslider.spin)

    def handle_plottype(self, event):
        print('Plot type changed!')  
    def handle_fieldtype(self, event):
        print('Field type changed!')  


    def handle_xyz(self, event):
        print('Component changed!')  
    def handle_normal(self, event):
        print('Normal changed!')  


    def handle_recslider(self, event):
        self.slidersp.recslider.SetValue(event.GetInt()) 
        print('Record changed!')
    def handle_rectxt(self, event):
        self.slidersp.recslider.SetValue(int(event.GetString())) 
        print('Record changed!')
    def handle_recspin(self, event):
        print('Record spin changed!') 


    def handle_binslider(self, event):
        self.slidersp.binslider.SetValue(event.GetInt()) 
        print('Bin changed!')
    def handle_bintxt(self, event):
        self.slidersp.binslider.SetValue(int(event.GetString())) 
        print('Bin changed!')
    def handle_binspin(self, event):
        print('Bin spin changed!') 




